{"filter":false,"title":"donations.html","tooltip":"/donations/templates/donations.html","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":2,"column":0},"end":{"row":459,"column":14},"action":"remove","lines":["<<<<<<< HEAD","{% block donations %}","  <div class=\"text-center\">","    <h2>Donate!</h2>","    ","    <style type=\"text/css\">","      .sr-root {","        display: flex;","        flex-direction: row;","        width: 100%;","        max-width: 980px;","        padding: 48px;","        align-content: center;","        justify-content: center;","        height: auto;","        min-height: 100vh;","        margin: 0 auto;","      }","      .sr-main {","        display: flex;","        flex-direction: column;","        justify-content: center;","        height: 100%;","        width: 100%;","        max-width: 450px;","        align-self: center;","        padding: 40px 50px;","        background: var(--body-color);","        border-radius: var(--radius);","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","        0px 2px 5px 0px rgba(50, 50, 93, 0.1),","        0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","      }","      ","      .sr-field-error {","        color: var(--font-color);","        text-align: left;","        font-size: 13px;","        line-height: 17px;","        margin-top: 12px;","      }","      ","      /* Inputs */","      .sr-input,","      input[type=\"text\"] {","        border: 1px solid var(--gray-border);","        border-radius: var(--radius);","        padding: 5px 12px;","        height: 44px;","        width: 100%;","        transition: box-shadow 0.2s ease;","        background: white;","        -moz-appearance: none;","        -webkit-appearance: none;","        appearance: none;","      }","      .sr-input:focus,","      input[type=\"text\"]:focus,","      button:focus,","      .focused {","        box-shadow: 0 0 0 1px rgba(50, 151, 211, 0.3), 0 1px 1px 0 rgba(0, 0, 0, 0.07),","          0 0 0 4px rgba(50, 151, 211, 0.3);","        outline: none;","        z-index: 9;","      }","      .sr-input::placeholder,","      input[type=\"text\"]::placeholder {","        color: var(--gray-light);","      }","      .sr-result {","        height: 44px;","        -webkit-transition: height 1s ease;","        -moz-transition: height 1s ease;","        -o-transition: height 1s ease;","        transition: height 1s ease;","        color: var(--font-color);","        overflow: auto;","      }","      .sr-result code {","        overflow: scroll;","      }","      .sr-result.expand {","        height: 350px;","      }","      ","      .sr-combo-inputs-row {","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","          0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","        border-radius: 7px;","      }","      ","      /* Buttons and links */","      button {","        background: var(--accent-color);","        border-radius: var(--radius);","        color: white;","        border: 0;","        padding: 12px 16px;","        margin-top: 16px;","        font-weight: 600;","        cursor: pointer;","        transition: all 0.2s ease;","        display: block;","        box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);","        width: 100%;","      }","      button:hover {","        filter: contrast(115%);","      }","      button:active {","        transform: translateY(0px) scale(0.98);","        filter: brightness(0.9);","      }","      button:disabled {","        opacity: 0.5;","        cursor: none;","      }","      ","      a {","        color: var(--link-color);","        text-decoration: none;","        transition: all 0.2s ease;","      }","      ","      a:hover {","        filter: brightness(0.8);","      }","      ","      a:active {","        filter: brightness(0.5);","      }","      ","      /* Code block */","      code,","      pre {","        font-family: \"SF Mono\", \"IBM Plex Mono\", \"Menlo\", monospace;","        font-size: 12px;","      }","      ","      /* Stripe Element placeholder */","      .sr-card-element {","        padding-top: 12px;","      }","      ","      /* Responsiveness */","      @media (max-width: 720px) {","        .sr-root {","          flex-direction: column;","          justify-content: flex-start;","          padding: 48px 20px;","          min-width: 320px;","        }","      ","        .sr-header__logo {","          background-position: center;","        }","      ","        .sr-payment-summary {","          text-align: center;","        }","      ","        .sr-content {","          display: none;","        }","      ","        .sr-main {","          width: 100%;","          height: 305px;","          background: rgb(247, 250, 252);","          box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","            0px 2px 5px 0px rgba(50, 50, 93, 0.1),","            0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","          border-radius: 6px;","        }","      }","      ","      /* todo: spinner/processing state, errors, animations */","      ","      #spinner {","        display: block;","      }","      ","      /* Animated form */","      ","      .sr-root {","        animation: 0.4s form-in;","        animation-fill-mode: both;","        animation-timing-function: ease;","      }","      ","      .hidden {","        display: none !important;","      }","      ","      @keyframes field-in {","        0% {","          opacity: 0;","          transform: translateY(8px) scale(0.95);","        }","        100% {","          opacity: 1;","          transform: translateY(0px) scale(1);","        }","      }","      ","      @keyframes form-in {","        0% {","          opacity: 0;","          transform: scale(0.98);","        }","        100% {","          opacity: 1;","          transform: scale(1);","        }","      }","","    </style>","    ","    <script src=\"https://js.stripe.com/v3\"></script>","    ","    <div class=\"sr-root\">","      <div class=\"sr-main\">","        <p>Enter your card details</p>","        <form id=\"payment-form\" class=\"sr-payment-form\">","          <div class=\"sr-combo-inputs-row\">","            <div class=\"sr-input sr-card-element\" id=\"card-element\"></div>","          </div>","          <div class=\"sr-field-error\" id=\"card-errors\" role=\"alert\"></div>","          <button id=\"submit\" class=\"btn btn-primary\">","            <span class=\"spinner hidden\" id=\"spinner\">","              Loading...","            </span>","            <span id=\"button-text\">Pay</span><span id=\"order-amount\"></span>","          </button>","        </form>","        <div class=\"sr-result hidden\">","          <p>Payment completed<br /></p>","          <pre>","            <code></code>","          </pre>","        </div>","      </div>","    </div>","  </div>","","  <script type=\"text/javascript\">","    let pay = function(stripe, card, clientSecret) {","      changeLoadingState(true);","    ","      // Initiate the payment.","      // If authentication is required, confirmCardPayment will automatically display a modal","      stripe","        .confirmCardPayment(clientSecret, {","          payment_method: {","            card: card","          }","        })","        .then(function(result) {","          if (result.error) {","            // Show error to your customer","            showError(result.error.message);","          } else {","            // The payment has been processed!","            orderComplete(clientSecret);","          }","        });","    };","  ","    let setupElements = function() {","      let stripe = Stripe(\"{{ stripe_pub_key }}\");","      let elements = stripe.elements();","      let style = {","        base: {","          color: \"#32325d\",","          fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',","          fontSmoothing: \"antialiased\",","          fontSize: \"16px\",","          \"::placeholder\": {","            color: \"#aab7c4\"","          }","        },","        invalid: {","          color: \"#fa755a\",","          iconColor: \"#fa755a\"","        }","      };","    ","      let card = elements.create(\"card\", { style: style });","      card.mount(\"#card-element\");","    ","      return {","        stripe: stripe,","        card: card,","        clientSecret: \"{{ client_secret }}\"","      };","    };","    ","    let { stripe, card, clientSecret } = setupElements();","    ","    document.querySelector(\"button\").disabled = false;","","    // Handle form submission.","    let form = document.getElementById(\"payment-form\");","    form.addEventListener(\"submit\", function(event) {","      event.preventDefault();","      // Initiate payment when the submit button is clicked","      pay(stripe, card, clientSecret);","    });","    ","    var orderComplete = function(clientSecret) {","    // Just for the purpose of the sample, show the PaymentIntent response object","    stripe.retrievePaymentIntent(clientSecret).then(function(result) {","      let form_data = new FormData();","      form_data.append('data', JSON.stringify(result.paymentIntent));","      ","      fetch('/thankyou/', {","        method: 'POST',","        body: form_data,","      }).then(resp => resp).then(data => window.location = '/thankyou/')","      ","    });","  };","  ","  var showError = function(errorMsgText) {","    changeLoadingState(false);","    var errorMsg = document.querySelector(\".sr-field-error\");","    errorMsg.textContent = errorMsgText;","    setTimeout(function() {","      errorMsg.textContent = \"\";","    }, 4000);","  };","  ","  // Show a spinner on payment submission","  var changeLoadingState = function(isLoading) {","    if (isLoading) {","      document.querySelector(\"button\").disabled = true;","      document.querySelector(\"#spinner\").classList.remove(\"hidden\");","      document.querySelector(\"#button-text\").classList.add(\"hidden\");","    } else {","      document.querySelector(\"button\").disabled = false;","      document.querySelector(\"#spinner\").classList.add(\"hidden\");","      document.querySelector(\"#button-text\").classList.remove(\"hidden\");","    }","  };","  </script>","{% endblock %}","=======","{% block head_js %}","  <script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"></script>","  <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery.payment/1.4.1/jquery.payment.js\"></script>","  <script>","    Stripe.setPublishableKey('api key');","    $(function() {","      var $form = $('#payment-form');","      $form.submit(function(event){","        // Disable the submit button to prevent repeated clicks:","        $form.find('.submit').prop('disabled', true).html('Please wait...');","        // Request a token from Stripe:","        Stripe.card.createToken($form, stripeResponseHandler);","        // Prevent the form from being submitted:","        return false;","      });","      // Format the card number","      $('#number').payment('formatCardNumber');","    });","    function stripeResponseHandler(status, response){","      var $form = $('#payment-form');","      // Clear any existing errors","      $form.find('.has-error').removeClass('has-error')","      if (response.error){","        // Show the errors on the form","        $form.find('.payment-errors').text(response.error.message).addClass('alert alert-danger');","        $form.find('#' + response.error.param).parents('.form-group').addClass('has-error');","        $form.find('button').prop('disabled', false).text('Pay $20'); // Re-enable submission","      } ","      else { // Token was created!","        // Get the token ID:","        var token = response.id;","        // Insert the token into the form so it gets submitted to the server:","        $form.append($('<input type=\"hidden\" name=\"stripeToken\" />').val(token));","        // Submit the form:","        $form.get(0).submit();","      }","    }","  </script>","{% endblock %}","","{% block donations %}","<div class=\"text-center\">","    <h2>Donate!</h2>","    {#<script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\" data-key=\"{{ key }}\" data-description=\"A Django Charge\" data-amount=\"500\" data-locale=\"auto\"></script>#}","    ","  ","    <div class=\"container\">","      <div class=\"row\">","        <div class=\"col-md-12 text-center\">","          <h1>A simple Bootstrap Stripe.js payment form</h1>","        </div>","      </div>","      ","      <div class=\"row\">","        <div class=\"col-md-6 offset-md-3\">","          <div class=\"card\">","            <div class=\"card-body\">","              <form action=\"\" method=\"POST\" id=\"payment-form\">","                <div class=\"payment-errors\"></div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Cardholder Name</label>","                      <input class=\"form-control input-lg\" id=\"name\" data-stripe=\"name\" type=\"text\" placeholder=\"Jimmy Dean\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Card Number</label>","                      <input class=\"form-control input-lg\" id=\"number\" type=\"tel\" size=\"20\" data-stripe=\"number\" placeholder=\"4242 4242 4242 4242\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Month</label>","                      <input class=\"form-control input-lg\" id=\"exp_month\" type=\"tel\" size=\"2\" data-stripe=\"exp-month\" placeholder=\"01\" required>","                    </div>","                  </div>","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Year</label>","                      <input class=\"form-control input-lg\" id=\"exp_year\" type=\"tel\" size=\"4\" data-stripe=\"exp-year\" placeholder=\"2020\" required>","                    </div>","                  </div>","                  <div class=\"col-md-6 col-sm-3 col-xs-4\">","                    <div class=\"form-group pull-right\">","                      <label>CVC</label>","                      <input class=\"form-control input-lg\" id=\"cvc\" type=\"tel\" size=\"4\" data-stripe=\"cvc\" placeholder=\"555\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <button class=\"btn btn-lg btn-block btn-success submit\" type=\"submit\">Pay $20</button>","                  </div>","                </div>","              </form>","            </div>","          </div>","        </div>","      </div>","    </div>","","{% endblock %}","","",">>>>>>> master"],"id":2},{"start":{"row":2,"column":0},"end":{"row":346,"column":14},"action":"insert","lines":["{% block donations %}","  <div class=\"text-center\">","    <h2>Donate!</h2>","    ","    <style type=\"text/css\">","      .sr-root {","        display: flex;","        flex-direction: row;","        width: 100%;","        max-width: 980px;","        padding: 48px;","        align-content: center;","        justify-content: center;","        height: auto;","        min-height: 100vh;","        margin: 0 auto;","      }","      .sr-main {","        display: flex;","        flex-direction: column;","        justify-content: center;","        height: 100%;","        width: 100%;","        max-width: 450px;","        align-self: center;","        padding: 40px 50px;","        background: var(--body-color);","        border-radius: var(--radius);","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","        0px 2px 5px 0px rgba(50, 50, 93, 0.1),","        0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","      }","      ","      .sr-field-error {","        color: var(--font-color);","        text-align: left;","        font-size: 13px;","        line-height: 17px;","        margin-top: 12px;","      }","      ","      /* Inputs */","      .sr-input,","      input[type=\"text\"] {","        border: 1px solid var(--gray-border);","        border-radius: var(--radius);","        padding: 5px 12px;","        height: 44px;","        width: 100%;","        transition: box-shadow 0.2s ease;","        background: white;","        -moz-appearance: none;","        -webkit-appearance: none;","        appearance: none;","      }","      .sr-input:focus,","      input[type=\"text\"]:focus,","      button:focus,","      .focused {","        box-shadow: 0 0 0 1px rgba(50, 151, 211, 0.3), 0 1px 1px 0 rgba(0, 0, 0, 0.07),","          0 0 0 4px rgba(50, 151, 211, 0.3);","        outline: none;","        z-index: 9;","      }","      .sr-input::placeholder,","      input[type=\"text\"]::placeholder {","        color: var(--gray-light);","      }","      .sr-result {","        height: 44px;","        -webkit-transition: height 1s ease;","        -moz-transition: height 1s ease;","        -o-transition: height 1s ease;","        transition: height 1s ease;","        color: var(--font-color);","        overflow: auto;","      }","      .sr-result code {","        overflow: scroll;","      }","      .sr-result.expand {","        height: 350px;","      }","      ","      .sr-combo-inputs-row {","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","          0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","        border-radius: 7px;","      }","      ","      /* Buttons and links */","      button {","        background: var(--accent-color);","        border-radius: var(--radius);","        color: white;","        border: 0;","        padding: 12px 16px;","        margin-top: 16px;","        font-weight: 600;","        cursor: pointer;","        transition: all 0.2s ease;","        display: block;","        box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);","        width: 100%;","      }","      button:hover {","        filter: contrast(115%);","      }","      button:active {","        transform: translateY(0px) scale(0.98);","        filter: brightness(0.9);","      }","      button:disabled {","        opacity: 0.5;","        cursor: none;","      }","      ","      a {","        color: var(--link-color);","        text-decoration: none;","        transition: all 0.2s ease;","      }","      ","      a:hover {","        filter: brightness(0.8);","      }","      ","      a:active {","        filter: brightness(0.5);","      }","      ","      /* Code block */","      code,","      pre {","        font-family: \"SF Mono\", \"IBM Plex Mono\", \"Menlo\", monospace;","        font-size: 12px;","      }","      ","      /* Stripe Element placeholder */","      .sr-card-element {","        padding-top: 12px;","      }","      ","      /* Responsiveness */","      @media (max-width: 720px) {","        .sr-root {","          flex-direction: column;","          justify-content: flex-start;","          padding: 48px 20px;","          min-width: 320px;","        }","      ","        .sr-header__logo {","          background-position: center;","        }","      ","        .sr-payment-summary {","          text-align: center;","        }","      ","        .sr-content {","          display: none;","        }","      ","        .sr-main {","          width: 100%;","          height: 305px;","          background: rgb(247, 250, 252);","          box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","            0px 2px 5px 0px rgba(50, 50, 93, 0.1),","            0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","          border-radius: 6px;","        }","      }","      ","      /* todo: spinner/processing state, errors, animations */","      ","      #spinner {","        display: block;","      }","      ","      /* Animated form */","      ","      .sr-root {","        animation: 0.4s form-in;","        animation-fill-mode: both;","        animation-timing-function: ease;","      }","      ","      .hidden {","        display: none !important;","      }","      ","      @keyframes field-in {","        0% {","          opacity: 0;","          transform: translateY(8px) scale(0.95);","        }","        100% {","          opacity: 1;","          transform: translateY(0px) scale(1);","        }","      }","      ","      @keyframes form-in {","        0% {","          opacity: 0;","          transform: scale(0.98);","        }","        100% {","          opacity: 1;","          transform: scale(1);","        }","      }","","    </style>","    ","    <script src=\"https://js.stripe.com/v3\"></script>","    ","    <div class=\"sr-root\">","      <div class=\"sr-main\">","        <p>Enter your card details</p>","        <form id=\"payment-form\" class=\"sr-payment-form\">","          <div class=\"sr-combo-inputs-row\">","            <div class=\"sr-input sr-card-element\" id=\"card-element\"></div>","          </div>","          <div class=\"sr-field-error\" id=\"card-errors\" role=\"alert\"></div>","          <button id=\"submit\" class=\"btn btn-primary\">","            <span class=\"spinner hidden\" id=\"spinner\">","              Loading...","            </span>","            <span id=\"button-text\">Pay</span><span id=\"order-amount\"></span>","          </button>","        </form>","        <div class=\"sr-result hidden\">","          <p>Payment completed<br /></p>","          <pre>","            <code></code>","          </pre>","        </div>","      </div>","    </div>","  </div>","","  <script type=\"text/javascript\">","    let pay = function(stripe, card, clientSecret) {","      changeLoadingState(true);","    ","      // Initiate the payment.","      // If authentication is required, confirmCardPayment will automatically display a modal","      stripe","        .confirmCardPayment(clientSecret, {","          payment_method: {","            card: card","          }","        })","        .then(function(result) {","          if (result.error) {","            // Show error to your customer","            showError(result.error.message);","          } else {","            // The payment has been processed!","            orderComplete(clientSecret);","          }","        });","    };","  ","    let setupElements = function() {","      let stripe = Stripe(\"{{ stripe_pub_key }}\");","      let elements = stripe.elements();","      let style = {","        base: {","          color: \"#32325d\",","          fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',","          fontSmoothing: \"antialiased\",","          fontSize: \"16px\",","          \"::placeholder\": {","            color: \"#aab7c4\"","          }","        },","        invalid: {","          color: \"#fa755a\",","          iconColor: \"#fa755a\"","        }","      };","    ","      let card = elements.create(\"card\", { style: style });","      card.mount(\"#card-element\");","    ","      return {","        stripe: stripe,","        card: card,","        clientSecret: \"{{ client_secret }}\"","      };","    };","    ","    let { stripe, card, clientSecret } = setupElements();","    ","    document.querySelector(\"button\").disabled = false;","","    // Handle form submission.","    let form = document.getElementById(\"payment-form\");","    form.addEventListener(\"submit\", function(event) {","      event.preventDefault();","      // Initiate payment when the submit button is clicked","      pay(stripe, card, clientSecret);","    });","    ","    var orderComplete = function(clientSecret) {","    // Just for the purpose of the sample, show the PaymentIntent response object","    stripe.retrievePaymentIntent(clientSecret).then(function(result) {","      let form_data = new FormData();","      form_data.append('data', JSON.stringify(result.paymentIntent));","      ","      fetch('/thankyou/', {","        method: 'POST',","        body: form_data,","      }).then(resp => resp).then(data => window.location = '/thankyou/')","      ","    });","  };","  ","  var showError = function(errorMsgText) {","    changeLoadingState(false);","    var errorMsg = document.querySelector(\".sr-field-error\");","    errorMsg.textContent = errorMsgText;","    setTimeout(function() {","      errorMsg.textContent = \"\";","    }, 4000);","  };","  ","  // Show a spinner on payment submission","  var changeLoadingState = function(isLoading) {","    if (isLoading) {","      document.querySelector(\"button\").disabled = true;","      document.querySelector(\"#spinner\").classList.remove(\"hidden\");","      document.querySelector(\"#button-text\").classList.add(\"hidden\");","    } else {","      document.querySelector(\"button\").disabled = false;","      document.querySelector(\"#spinner\").classList.add(\"hidden\");","      document.querySelector(\"#button-text\").classList.remove(\"hidden\");","    }","  };","  </script>","{% endblock %}"]}],[{"start":{"row":2,"column":9},"end":{"row":346,"column":14},"action":"remove","lines":["donations %}","  <div class=\"text-center\">","    <h2>Donate!</h2>","    ","    <style type=\"text/css\">","      .sr-root {","        display: flex;","        flex-direction: row;","        width: 100%;","        max-width: 980px;","        padding: 48px;","        align-content: center;","        justify-content: center;","        height: auto;","        min-height: 100vh;","        margin: 0 auto;","      }","      .sr-main {","        display: flex;","        flex-direction: column;","        justify-content: center;","        height: 100%;","        width: 100%;","        max-width: 450px;","        align-self: center;","        padding: 40px 50px;","        background: var(--body-color);","        border-radius: var(--radius);","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","        0px 2px 5px 0px rgba(50, 50, 93, 0.1),","        0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","      }","      ","      .sr-field-error {","        color: var(--font-color);","        text-align: left;","        font-size: 13px;","        line-height: 17px;","        margin-top: 12px;","      }","      ","      /* Inputs */","      .sr-input,","      input[type=\"text\"] {","        border: 1px solid var(--gray-border);","        border-radius: var(--radius);","        padding: 5px 12px;","        height: 44px;","        width: 100%;","        transition: box-shadow 0.2s ease;","        background: white;","        -moz-appearance: none;","        -webkit-appearance: none;","        appearance: none;","      }","      .sr-input:focus,","      input[type=\"text\"]:focus,","      button:focus,","      .focused {","        box-shadow: 0 0 0 1px rgba(50, 151, 211, 0.3), 0 1px 1px 0 rgba(0, 0, 0, 0.07),","          0 0 0 4px rgba(50, 151, 211, 0.3);","        outline: none;","        z-index: 9;","      }","      .sr-input::placeholder,","      input[type=\"text\"]::placeholder {","        color: var(--gray-light);","      }","      .sr-result {","        height: 44px;","        -webkit-transition: height 1s ease;","        -moz-transition: height 1s ease;","        -o-transition: height 1s ease;","        transition: height 1s ease;","        color: var(--font-color);","        overflow: auto;","      }","      .sr-result code {","        overflow: scroll;","      }","      .sr-result.expand {","        height: 350px;","      }","      ","      .sr-combo-inputs-row {","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","          0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","        border-radius: 7px;","      }","      ","      /* Buttons and links */","      button {","        background: var(--accent-color);","        border-radius: var(--radius);","        color: white;","        border: 0;","        padding: 12px 16px;","        margin-top: 16px;","        font-weight: 600;","        cursor: pointer;","        transition: all 0.2s ease;","        display: block;","        box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);","        width: 100%;","      }","      button:hover {","        filter: contrast(115%);","      }","      button:active {","        transform: translateY(0px) scale(0.98);","        filter: brightness(0.9);","      }","      button:disabled {","        opacity: 0.5;","        cursor: none;","      }","      ","      a {","        color: var(--link-color);","        text-decoration: none;","        transition: all 0.2s ease;","      }","      ","      a:hover {","        filter: brightness(0.8);","      }","      ","      a:active {","        filter: brightness(0.5);","      }","      ","      /* Code block */","      code,","      pre {","        font-family: \"SF Mono\", \"IBM Plex Mono\", \"Menlo\", monospace;","        font-size: 12px;","      }","      ","      /* Stripe Element placeholder */","      .sr-card-element {","        padding-top: 12px;","      }","      ","      /* Responsiveness */","      @media (max-width: 720px) {","        .sr-root {","          flex-direction: column;","          justify-content: flex-start;","          padding: 48px 20px;","          min-width: 320px;","        }","      ","        .sr-header__logo {","          background-position: center;","        }","      ","        .sr-payment-summary {","          text-align: center;","        }","      ","        .sr-content {","          display: none;","        }","      ","        .sr-main {","          width: 100%;","          height: 305px;","          background: rgb(247, 250, 252);","          box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","            0px 2px 5px 0px rgba(50, 50, 93, 0.1),","            0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","          border-radius: 6px;","        }","      }","      ","      /* todo: spinner/processing state, errors, animations */","      ","      #spinner {","        display: block;","      }","      ","      /* Animated form */","      ","      .sr-root {","        animation: 0.4s form-in;","        animation-fill-mode: both;","        animation-timing-function: ease;","      }","      ","      .hidden {","        display: none !important;","      }","      ","      @keyframes field-in {","        0% {","          opacity: 0;","          transform: translateY(8px) scale(0.95);","        }","        100% {","          opacity: 1;","          transform: translateY(0px) scale(1);","        }","      }","      ","      @keyframes form-in {","        0% {","          opacity: 0;","          transform: scale(0.98);","        }","        100% {","          opacity: 1;","          transform: scale(1);","        }","      }","","    </style>","    ","    <script src=\"https://js.stripe.com/v3\"></script>","    ","    <div class=\"sr-root\">","      <div class=\"sr-main\">","        <p>Enter your card details</p>","        <form id=\"payment-form\" class=\"sr-payment-form\">","          <div class=\"sr-combo-inputs-row\">","            <div class=\"sr-input sr-card-element\" id=\"card-element\"></div>","          </div>","          <div class=\"sr-field-error\" id=\"card-errors\" role=\"alert\"></div>","          <button id=\"submit\" class=\"btn btn-primary\">","            <span class=\"spinner hidden\" id=\"spinner\">","              Loading...","            </span>","            <span id=\"button-text\">Pay</span><span id=\"order-amount\"></span>","          </button>","        </form>","        <div class=\"sr-result hidden\">","          <p>Payment completed<br /></p>","          <pre>","            <code></code>","          </pre>","        </div>","      </div>","    </div>","  </div>","","  <script type=\"text/javascript\">","    let pay = function(stripe, card, clientSecret) {","      changeLoadingState(true);","    ","      // Initiate the payment.","      // If authentication is required, confirmCardPayment will automatically display a modal","      stripe","        .confirmCardPayment(clientSecret, {","          payment_method: {","            card: card","          }","        })","        .then(function(result) {","          if (result.error) {","            // Show error to your customer","            showError(result.error.message);","          } else {","            // The payment has been processed!","            orderComplete(clientSecret);","          }","        });","    };","  ","    let setupElements = function() {","      let stripe = Stripe(\"{{ stripe_pub_key }}\");","      let elements = stripe.elements();","      let style = {","        base: {","          color: \"#32325d\",","          fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',","          fontSmoothing: \"antialiased\",","          fontSize: \"16px\",","          \"::placeholder\": {","            color: \"#aab7c4\"","          }","        },","        invalid: {","          color: \"#fa755a\",","          iconColor: \"#fa755a\"","        }","      };","    ","      let card = elements.create(\"card\", { style: style });","      card.mount(\"#card-element\");","    ","      return {","        stripe: stripe,","        card: card,","        clientSecret: \"{{ client_secret }}\"","      };","    };","    ","    let { stripe, card, clientSecret } = setupElements();","    ","    document.querySelector(\"button\").disabled = false;","","    // Handle form submission.","    let form = document.getElementById(\"payment-form\");","    form.addEventListener(\"submit\", function(event) {","      event.preventDefault();","      // Initiate payment when the submit button is clicked","      pay(stripe, card, clientSecret);","    });","    ","    var orderComplete = function(clientSecret) {","    // Just for the purpose of the sample, show the PaymentIntent response object","    stripe.retrievePaymentIntent(clientSecret).then(function(result) {","      let form_data = new FormData();","      form_data.append('data', JSON.stringify(result.paymentIntent));","      ","      fetch('/thankyou/', {","        method: 'POST',","        body: form_data,","      }).then(resp => resp).then(data => window.location = '/thankyou/')","      ","    });","  };","  ","  var showError = function(errorMsgText) {","    changeLoadingState(false);","    var errorMsg = document.querySelector(\".sr-field-error\");","    errorMsg.textContent = errorMsgText;","    setTimeout(function() {","      errorMsg.textContent = \"\";","    }, 4000);","  };","  ","  // Show a spinner on payment submission","  var changeLoadingState = function(isLoading) {","    if (isLoading) {","      document.querySelector(\"button\").disabled = true;","      document.querySelector(\"#spinner\").classList.remove(\"hidden\");","      document.querySelector(\"#button-text\").classList.add(\"hidden\");","    } else {","      document.querySelector(\"button\").disabled = false;","      document.querySelector(\"#spinner\").classList.add(\"hidden\");","      document.querySelector(\"#button-text\").classList.remove(\"hidden\");","    }","  };","  </script>","{% endblock %}"],"id":3,"ignore":true},{"start":{"row":2,"column":9},"end":{"row":111,"column":0},"action":"insert","lines":["head_js %}","  <script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"></script>","  <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery.payment/1.4.1/jquery.payment.js\"></script>","  <script>","    Stripe.setPublishableKey('api key');","    $(function() {","      var $form = $('#payment-form');","      $form.submit(function(event){","        // Disable the submit button to prevent repeated clicks:","        $form.find('.submit').prop('disabled', true).html('Please wait...');","        // Request a token from Stripe:","        Stripe.card.createToken($form, stripeResponseHandler);","        // Prevent the form from being submitted:","        return false;","      });","      // Format the card number","      $('#number').payment('formatCardNumber');","    });","    function stripeResponseHandler(status, response){","      var $form = $('#payment-form');","      // Clear any existing errors","      $form.find('.has-error').removeClass('has-error')","      if (response.error){","        // Show the errors on the form","        $form.find('.payment-errors').text(response.error.message).addClass('alert alert-danger');","        $form.find('#' + response.error.param).parents('.form-group').addClass('has-error');","        $form.find('button').prop('disabled', false).text('Pay $20'); // Re-enable submission","      } ","      else { // Token was created!","        // Get the token ID:","        var token = response.id;","        // Insert the token into the form so it gets submitted to the server:","        $form.append($('<input type=\"hidden\" name=\"stripeToken\" />').val(token));","        // Submit the form:","        $form.get(0).submit();","      }","    }","  </script>","{% endblock %}","","{% block donations %}","<div class=\"text-center\">","    <h2>Donate!</h2>","    {#<script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\" data-key=\"{{ key }}\" data-description=\"A Django Charge\" data-amount=\"500\" data-locale=\"auto\"></script>#}","    ","  ","    <div class=\"container\">","      <div class=\"row\">","        <div class=\"col-md-12 text-center\">","          <h1>A simple Bootstrap Stripe.js payment form</h1>","        </div>","      </div>","      ","      <div class=\"row\">","        <div class=\"col-md-6 offset-md-3\">","          <div class=\"card\">","            <div class=\"card-body\">","              <form action=\"\" method=\"POST\" id=\"payment-form\">","                <div class=\"payment-errors\"></div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Cardholder Name</label>","                      <input class=\"form-control input-lg\" id=\"name\" data-stripe=\"name\" type=\"text\" placeholder=\"Jimmy Dean\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Card Number</label>","                      <input class=\"form-control input-lg\" id=\"number\" type=\"tel\" size=\"20\" data-stripe=\"number\" placeholder=\"4242 4242 4242 4242\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Month</label>","                      <input class=\"form-control input-lg\" id=\"exp_month\" type=\"tel\" size=\"2\" data-stripe=\"exp-month\" placeholder=\"01\" required>","                    </div>","                  </div>","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Year</label>","                      <input class=\"form-control input-lg\" id=\"exp_year\" type=\"tel\" size=\"4\" data-stripe=\"exp-year\" placeholder=\"2020\" required>","                    </div>","                  </div>","                  <div class=\"col-md-6 col-sm-3 col-xs-4\">","                    <div class=\"form-group pull-right\">","                      <label>CVC</label>","                      <input class=\"form-control input-lg\" id=\"cvc\" type=\"tel\" size=\"4\" data-stripe=\"cvc\" placeholder=\"555\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <button class=\"btn btn-lg btn-block btn-success submit\" type=\"submit\">Pay $20</button>","                  </div>","                </div>","              </form>","            </div>","          </div>","        </div>","      </div>","    </div>","","{% endblock %}","",""]}],[{"start":{"row":2,"column":9},"end":{"row":111,"column":0},"action":"remove","lines":["head_js %}","  <script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"></script>","  <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery.payment/1.4.1/jquery.payment.js\"></script>","  <script>","    Stripe.setPublishableKey('api key');","    $(function() {","      var $form = $('#payment-form');","      $form.submit(function(event){","        // Disable the submit button to prevent repeated clicks:","        $form.find('.submit').prop('disabled', true).html('Please wait...');","        // Request a token from Stripe:","        Stripe.card.createToken($form, stripeResponseHandler);","        // Prevent the form from being submitted:","        return false;","      });","      // Format the card number","      $('#number').payment('formatCardNumber');","    });","    function stripeResponseHandler(status, response){","      var $form = $('#payment-form');","      // Clear any existing errors","      $form.find('.has-error').removeClass('has-error')","      if (response.error){","        // Show the errors on the form","        $form.find('.payment-errors').text(response.error.message).addClass('alert alert-danger');","        $form.find('#' + response.error.param).parents('.form-group').addClass('has-error');","        $form.find('button').prop('disabled', false).text('Pay $20'); // Re-enable submission","      } ","      else { // Token was created!","        // Get the token ID:","        var token = response.id;","        // Insert the token into the form so it gets submitted to the server:","        $form.append($('<input type=\"hidden\" name=\"stripeToken\" />').val(token));","        // Submit the form:","        $form.get(0).submit();","      }","    }","  </script>","{% endblock %}","","{% block donations %}","<div class=\"text-center\">","    <h2>Donate!</h2>","    {#<script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\" data-key=\"{{ key }}\" data-description=\"A Django Charge\" data-amount=\"500\" data-locale=\"auto\"></script>#}","    ","  ","    <div class=\"container\">","      <div class=\"row\">","        <div class=\"col-md-12 text-center\">","          <h1>A simple Bootstrap Stripe.js payment form</h1>","        </div>","      </div>","      ","      <div class=\"row\">","        <div class=\"col-md-6 offset-md-3\">","          <div class=\"card\">","            <div class=\"card-body\">","              <form action=\"\" method=\"POST\" id=\"payment-form\">","                <div class=\"payment-errors\"></div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Cardholder Name</label>","                      <input class=\"form-control input-lg\" id=\"name\" data-stripe=\"name\" type=\"text\" placeholder=\"Jimmy Dean\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Card Number</label>","                      <input class=\"form-control input-lg\" id=\"number\" type=\"tel\" size=\"20\" data-stripe=\"number\" placeholder=\"4242 4242 4242 4242\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Month</label>","                      <input class=\"form-control input-lg\" id=\"exp_month\" type=\"tel\" size=\"2\" data-stripe=\"exp-month\" placeholder=\"01\" required>","                    </div>","                  </div>","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Year</label>","                      <input class=\"form-control input-lg\" id=\"exp_year\" type=\"tel\" size=\"4\" data-stripe=\"exp-year\" placeholder=\"2020\" required>","                    </div>","                  </div>","                  <div class=\"col-md-6 col-sm-3 col-xs-4\">","                    <div class=\"form-group pull-right\">","                      <label>CVC</label>","                      <input class=\"form-control input-lg\" id=\"cvc\" type=\"tel\" size=\"4\" data-stripe=\"cvc\" placeholder=\"555\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <button class=\"btn btn-lg btn-block btn-success submit\" type=\"submit\">Pay $20</button>","                  </div>","                </div>","              </form>","            </div>","          </div>","        </div>","      </div>","    </div>","","{% endblock %}","",""],"id":4,"ignore":true},{"start":{"row":2,"column":9},"end":{"row":346,"column":14},"action":"insert","lines":["donations %}","  <div class=\"text-center\">","    <h2>Donate!</h2>","    ","    <style type=\"text/css\">","      .sr-root {","        display: flex;","        flex-direction: row;","        width: 100%;","        max-width: 980px;","        padding: 48px;","        align-content: center;","        justify-content: center;","        height: auto;","        min-height: 100vh;","        margin: 0 auto;","      }","      .sr-main {","        display: flex;","        flex-direction: column;","        justify-content: center;","        height: 100%;","        width: 100%;","        max-width: 450px;","        align-self: center;","        padding: 40px 50px;","        background: var(--body-color);","        border-radius: var(--radius);","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","        0px 2px 5px 0px rgba(50, 50, 93, 0.1),","        0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","      }","      ","      .sr-field-error {","        color: var(--font-color);","        text-align: left;","        font-size: 13px;","        line-height: 17px;","        margin-top: 12px;","      }","      ","      /* Inputs */","      .sr-input,","      input[type=\"text\"] {","        border: 1px solid var(--gray-border);","        border-radius: var(--radius);","        padding: 5px 12px;","        height: 44px;","        width: 100%;","        transition: box-shadow 0.2s ease;","        background: white;","        -moz-appearance: none;","        -webkit-appearance: none;","        appearance: none;","      }","      .sr-input:focus,","      input[type=\"text\"]:focus,","      button:focus,","      .focused {","        box-shadow: 0 0 0 1px rgba(50, 151, 211, 0.3), 0 1px 1px 0 rgba(0, 0, 0, 0.07),","          0 0 0 4px rgba(50, 151, 211, 0.3);","        outline: none;","        z-index: 9;","      }","      .sr-input::placeholder,","      input[type=\"text\"]::placeholder {","        color: var(--gray-light);","      }","      .sr-result {","        height: 44px;","        -webkit-transition: height 1s ease;","        -moz-transition: height 1s ease;","        -o-transition: height 1s ease;","        transition: height 1s ease;","        color: var(--font-color);","        overflow: auto;","      }","      .sr-result code {","        overflow: scroll;","      }","      .sr-result.expand {","        height: 350px;","      }","      ","      .sr-combo-inputs-row {","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","          0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","        border-radius: 7px;","      }","      ","      /* Buttons and links */","      button {","        background: var(--accent-color);","        border-radius: var(--radius);","        color: white;","        border: 0;","        padding: 12px 16px;","        margin-top: 16px;","        font-weight: 600;","        cursor: pointer;","        transition: all 0.2s ease;","        display: block;","        box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);","        width: 100%;","      }","      button:hover {","        filter: contrast(115%);","      }","      button:active {","        transform: translateY(0px) scale(0.98);","        filter: brightness(0.9);","      }","      button:disabled {","        opacity: 0.5;","        cursor: none;","      }","      ","      a {","        color: var(--link-color);","        text-decoration: none;","        transition: all 0.2s ease;","      }","      ","      a:hover {","        filter: brightness(0.8);","      }","      ","      a:active {","        filter: brightness(0.5);","      }","      ","      /* Code block */","      code,","      pre {","        font-family: \"SF Mono\", \"IBM Plex Mono\", \"Menlo\", monospace;","        font-size: 12px;","      }","      ","      /* Stripe Element placeholder */","      .sr-card-element {","        padding-top: 12px;","      }","      ","      /* Responsiveness */","      @media (max-width: 720px) {","        .sr-root {","          flex-direction: column;","          justify-content: flex-start;","          padding: 48px 20px;","          min-width: 320px;","        }","      ","        .sr-header__logo {","          background-position: center;","        }","      ","        .sr-payment-summary {","          text-align: center;","        }","      ","        .sr-content {","          display: none;","        }","      ","        .sr-main {","          width: 100%;","          height: 305px;","          background: rgb(247, 250, 252);","          box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","            0px 2px 5px 0px rgba(50, 50, 93, 0.1),","            0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","          border-radius: 6px;","        }","      }","      ","      /* todo: spinner/processing state, errors, animations */","      ","      #spinner {","        display: block;","      }","      ","      /* Animated form */","      ","      .sr-root {","        animation: 0.4s form-in;","        animation-fill-mode: both;","        animation-timing-function: ease;","      }","      ","      .hidden {","        display: none !important;","      }","      ","      @keyframes field-in {","        0% {","          opacity: 0;","          transform: translateY(8px) scale(0.95);","        }","        100% {","          opacity: 1;","          transform: translateY(0px) scale(1);","        }","      }","      ","      @keyframes form-in {","        0% {","          opacity: 0;","          transform: scale(0.98);","        }","        100% {","          opacity: 1;","          transform: scale(1);","        }","      }","","    </style>","    ","    <script src=\"https://js.stripe.com/v3\"></script>","    ","    <div class=\"sr-root\">","      <div class=\"sr-main\">","        <p>Enter your card details</p>","        <form id=\"payment-form\" class=\"sr-payment-form\">","          <div class=\"sr-combo-inputs-row\">","            <div class=\"sr-input sr-card-element\" id=\"card-element\"></div>","          </div>","          <div class=\"sr-field-error\" id=\"card-errors\" role=\"alert\"></div>","          <button id=\"submit\" class=\"btn btn-primary\">","            <span class=\"spinner hidden\" id=\"spinner\">","              Loading...","            </span>","            <span id=\"button-text\">Pay</span><span id=\"order-amount\"></span>","          </button>","        </form>","        <div class=\"sr-result hidden\">","          <p>Payment completed<br /></p>","          <pre>","            <code></code>","          </pre>","        </div>","      </div>","    </div>","  </div>","","  <script type=\"text/javascript\">","    let pay = function(stripe, card, clientSecret) {","      changeLoadingState(true);","    ","      // Initiate the payment.","      // If authentication is required, confirmCardPayment will automatically display a modal","      stripe","        .confirmCardPayment(clientSecret, {","          payment_method: {","            card: card","          }","        })","        .then(function(result) {","          if (result.error) {","            // Show error to your customer","            showError(result.error.message);","          } else {","            // The payment has been processed!","            orderComplete(clientSecret);","          }","        });","    };","  ","    let setupElements = function() {","      let stripe = Stripe(\"{{ stripe_pub_key }}\");","      let elements = stripe.elements();","      let style = {","        base: {","          color: \"#32325d\",","          fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',","          fontSmoothing: \"antialiased\",","          fontSize: \"16px\",","          \"::placeholder\": {","            color: \"#aab7c4\"","          }","        },","        invalid: {","          color: \"#fa755a\",","          iconColor: \"#fa755a\"","        }","      };","    ","      let card = elements.create(\"card\", { style: style });","      card.mount(\"#card-element\");","    ","      return {","        stripe: stripe,","        card: card,","        clientSecret: \"{{ client_secret }}\"","      };","    };","    ","    let { stripe, card, clientSecret } = setupElements();","    ","    document.querySelector(\"button\").disabled = false;","","    // Handle form submission.","    let form = document.getElementById(\"payment-form\");","    form.addEventListener(\"submit\", function(event) {","      event.preventDefault();","      // Initiate payment when the submit button is clicked","      pay(stripe, card, clientSecret);","    });","    ","    var orderComplete = function(clientSecret) {","    // Just for the purpose of the sample, show the PaymentIntent response object","    stripe.retrievePaymentIntent(clientSecret).then(function(result) {","      let form_data = new FormData();","      form_data.append('data', JSON.stringify(result.paymentIntent));","      ","      fetch('/thankyou/', {","        method: 'POST',","        body: form_data,","      }).then(resp => resp).then(data => window.location = '/thankyou/')","      ","    });","  };","  ","  var showError = function(errorMsgText) {","    changeLoadingState(false);","    var errorMsg = document.querySelector(\".sr-field-error\");","    errorMsg.textContent = errorMsgText;","    setTimeout(function() {","      errorMsg.textContent = \"\";","    }, 4000);","  };","  ","  // Show a spinner on payment submission","  var changeLoadingState = function(isLoading) {","    if (isLoading) {","      document.querySelector(\"button\").disabled = true;","      document.querySelector(\"#spinner\").classList.remove(\"hidden\");","      document.querySelector(\"#button-text\").classList.add(\"hidden\");","    } else {","      document.querySelector(\"button\").disabled = false;","      document.querySelector(\"#spinner\").classList.add(\"hidden\");","      document.querySelector(\"#button-text\").classList.remove(\"hidden\");","    }","  };","  </script>","{% endblock %}"]}],[{"start":{"row":2,"column":9},"end":{"row":346,"column":14},"action":"remove","lines":["donations %}","  <div class=\"text-center\">","    <h2>Donate!</h2>","    ","    <style type=\"text/css\">","      .sr-root {","        display: flex;","        flex-direction: row;","        width: 100%;","        max-width: 980px;","        padding: 48px;","        align-content: center;","        justify-content: center;","        height: auto;","        min-height: 100vh;","        margin: 0 auto;","      }","      .sr-main {","        display: flex;","        flex-direction: column;","        justify-content: center;","        height: 100%;","        width: 100%;","        max-width: 450px;","        align-self: center;","        padding: 40px 50px;","        background: var(--body-color);","        border-radius: var(--radius);","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","        0px 2px 5px 0px rgba(50, 50, 93, 0.1),","        0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","      }","      ","      .sr-field-error {","        color: var(--font-color);","        text-align: left;","        font-size: 13px;","        line-height: 17px;","        margin-top: 12px;","      }","      ","      /* Inputs */","      .sr-input,","      input[type=\"text\"] {","        border: 1px solid var(--gray-border);","        border-radius: var(--radius);","        padding: 5px 12px;","        height: 44px;","        width: 100%;","        transition: box-shadow 0.2s ease;","        background: white;","        -moz-appearance: none;","        -webkit-appearance: none;","        appearance: none;","      }","      .sr-input:focus,","      input[type=\"text\"]:focus,","      button:focus,","      .focused {","        box-shadow: 0 0 0 1px rgba(50, 151, 211, 0.3), 0 1px 1px 0 rgba(0, 0, 0, 0.07),","          0 0 0 4px rgba(50, 151, 211, 0.3);","        outline: none;","        z-index: 9;","      }","      .sr-input::placeholder,","      input[type=\"text\"]::placeholder {","        color: var(--gray-light);","      }","      .sr-result {","        height: 44px;","        -webkit-transition: height 1s ease;","        -moz-transition: height 1s ease;","        -o-transition: height 1s ease;","        transition: height 1s ease;","        color: var(--font-color);","        overflow: auto;","      }","      .sr-result code {","        overflow: scroll;","      }","      .sr-result.expand {","        height: 350px;","      }","      ","      .sr-combo-inputs-row {","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","          0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","        border-radius: 7px;","      }","      ","      /* Buttons and links */","      button {","        background: var(--accent-color);","        border-radius: var(--radius);","        color: white;","        border: 0;","        padding: 12px 16px;","        margin-top: 16px;","        font-weight: 600;","        cursor: pointer;","        transition: all 0.2s ease;","        display: block;","        box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);","        width: 100%;","      }","      button:hover {","        filter: contrast(115%);","      }","      button:active {","        transform: translateY(0px) scale(0.98);","        filter: brightness(0.9);","      }","      button:disabled {","        opacity: 0.5;","        cursor: none;","      }","      ","      a {","        color: var(--link-color);","        text-decoration: none;","        transition: all 0.2s ease;","      }","      ","      a:hover {","        filter: brightness(0.8);","      }","      ","      a:active {","        filter: brightness(0.5);","      }","      ","      /* Code block */","      code,","      pre {","        font-family: \"SF Mono\", \"IBM Plex Mono\", \"Menlo\", monospace;","        font-size: 12px;","      }","      ","      /* Stripe Element placeholder */","      .sr-card-element {","        padding-top: 12px;","      }","      ","      /* Responsiveness */","      @media (max-width: 720px) {","        .sr-root {","          flex-direction: column;","          justify-content: flex-start;","          padding: 48px 20px;","          min-width: 320px;","        }","      ","        .sr-header__logo {","          background-position: center;","        }","      ","        .sr-payment-summary {","          text-align: center;","        }","      ","        .sr-content {","          display: none;","        }","      ","        .sr-main {","          width: 100%;","          height: 305px;","          background: rgb(247, 250, 252);","          box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","            0px 2px 5px 0px rgba(50, 50, 93, 0.1),","            0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","          border-radius: 6px;","        }","      }","      ","      /* todo: spinner/processing state, errors, animations */","      ","      #spinner {","        display: block;","      }","      ","      /* Animated form */","      ","      .sr-root {","        animation: 0.4s form-in;","        animation-fill-mode: both;","        animation-timing-function: ease;","      }","      ","      .hidden {","        display: none !important;","      }","      ","      @keyframes field-in {","        0% {","          opacity: 0;","          transform: translateY(8px) scale(0.95);","        }","        100% {","          opacity: 1;","          transform: translateY(0px) scale(1);","        }","      }","      ","      @keyframes form-in {","        0% {","          opacity: 0;","          transform: scale(0.98);","        }","        100% {","          opacity: 1;","          transform: scale(1);","        }","      }","","    </style>","    ","    <script src=\"https://js.stripe.com/v3\"></script>","    ","    <div class=\"sr-root\">","      <div class=\"sr-main\">","        <p>Enter your card details</p>","        <form id=\"payment-form\" class=\"sr-payment-form\">","          <div class=\"sr-combo-inputs-row\">","            <div class=\"sr-input sr-card-element\" id=\"card-element\"></div>","          </div>","          <div class=\"sr-field-error\" id=\"card-errors\" role=\"alert\"></div>","          <button id=\"submit\" class=\"btn btn-primary\">","            <span class=\"spinner hidden\" id=\"spinner\">","              Loading...","            </span>","            <span id=\"button-text\">Pay</span><span id=\"order-amount\"></span>","          </button>","        </form>","        <div class=\"sr-result hidden\">","          <p>Payment completed<br /></p>","          <pre>","            <code></code>","          </pre>","        </div>","      </div>","    </div>","  </div>","","  <script type=\"text/javascript\">","    let pay = function(stripe, card, clientSecret) {","      changeLoadingState(true);","    ","      // Initiate the payment.","      // If authentication is required, confirmCardPayment will automatically display a modal","      stripe","        .confirmCardPayment(clientSecret, {","          payment_method: {","            card: card","          }","        })","        .then(function(result) {","          if (result.error) {","            // Show error to your customer","            showError(result.error.message);","          } else {","            // The payment has been processed!","            orderComplete(clientSecret);","          }","        });","    };","  ","    let setupElements = function() {","      let stripe = Stripe(\"{{ stripe_pub_key }}\");","      let elements = stripe.elements();","      let style = {","        base: {","          color: \"#32325d\",","          fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',","          fontSmoothing: \"antialiased\",","          fontSize: \"16px\",","          \"::placeholder\": {","            color: \"#aab7c4\"","          }","        },","        invalid: {","          color: \"#fa755a\",","          iconColor: \"#fa755a\"","        }","      };","    ","      let card = elements.create(\"card\", { style: style });","      card.mount(\"#card-element\");","    ","      return {","        stripe: stripe,","        card: card,","        clientSecret: \"{{ client_secret }}\"","      };","    };","    ","    let { stripe, card, clientSecret } = setupElements();","    ","    document.querySelector(\"button\").disabled = false;","","    // Handle form submission.","    let form = document.getElementById(\"payment-form\");","    form.addEventListener(\"submit\", function(event) {","      event.preventDefault();","      // Initiate payment when the submit button is clicked","      pay(stripe, card, clientSecret);","    });","    ","    var orderComplete = function(clientSecret) {","    // Just for the purpose of the sample, show the PaymentIntent response object","    stripe.retrievePaymentIntent(clientSecret).then(function(result) {","      let form_data = new FormData();","      form_data.append('data', JSON.stringify(result.paymentIntent));","      ","      fetch('/thankyou/', {","        method: 'POST',","        body: form_data,","      }).then(resp => resp).then(data => window.location = '/thankyou/')","      ","    });","  };","  ","  var showError = function(errorMsgText) {","    changeLoadingState(false);","    var errorMsg = document.querySelector(\".sr-field-error\");","    errorMsg.textContent = errorMsgText;","    setTimeout(function() {","      errorMsg.textContent = \"\";","    }, 4000);","  };","  ","  // Show a spinner on payment submission","  var changeLoadingState = function(isLoading) {","    if (isLoading) {","      document.querySelector(\"button\").disabled = true;","      document.querySelector(\"#spinner\").classList.remove(\"hidden\");","      document.querySelector(\"#button-text\").classList.add(\"hidden\");","    } else {","      document.querySelector(\"button\").disabled = false;","      document.querySelector(\"#spinner\").classList.add(\"hidden\");","      document.querySelector(\"#button-text\").classList.remove(\"hidden\");","    }","  };","  </script>","{% endblock %}"],"id":5,"ignore":true},{"start":{"row":2,"column":9},"end":{"row":111,"column":0},"action":"insert","lines":["head_js %}","  <script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"></script>","  <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery.payment/1.4.1/jquery.payment.js\"></script>","  <script>","    Stripe.setPublishableKey('api key');","    $(function() {","      var $form = $('#payment-form');","      $form.submit(function(event){","        // Disable the submit button to prevent repeated clicks:","        $form.find('.submit').prop('disabled', true).html('Please wait...');","        // Request a token from Stripe:","        Stripe.card.createToken($form, stripeResponseHandler);","        // Prevent the form from being submitted:","        return false;","      });","      // Format the card number","      $('#number').payment('formatCardNumber');","    });","    function stripeResponseHandler(status, response){","      var $form = $('#payment-form');","      // Clear any existing errors","      $form.find('.has-error').removeClass('has-error')","      if (response.error){","        // Show the errors on the form","        $form.find('.payment-errors').text(response.error.message).addClass('alert alert-danger');","        $form.find('#' + response.error.param).parents('.form-group').addClass('has-error');","        $form.find('button').prop('disabled', false).text('Pay $20'); // Re-enable submission","      } ","      else { // Token was created!","        // Get the token ID:","        var token = response.id;","        // Insert the token into the form so it gets submitted to the server:","        $form.append($('<input type=\"hidden\" name=\"stripeToken\" />').val(token));","        // Submit the form:","        $form.get(0).submit();","      }","    }","  </script>","{% endblock %}","","{% block donations %}","<div class=\"text-center\">","    <h2>Donate!</h2>","    {#<script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\" data-key=\"{{ key }}\" data-description=\"A Django Charge\" data-amount=\"500\" data-locale=\"auto\"></script>#}","    ","  ","    <div class=\"container\">","      <div class=\"row\">","        <div class=\"col-md-12 text-center\">","          <h1>A simple Bootstrap Stripe.js payment form</h1>","        </div>","      </div>","      ","      <div class=\"row\">","        <div class=\"col-md-6 offset-md-3\">","          <div class=\"card\">","            <div class=\"card-body\">","              <form action=\"\" method=\"POST\" id=\"payment-form\">","                <div class=\"payment-errors\"></div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Cardholder Name</label>","                      <input class=\"form-control input-lg\" id=\"name\" data-stripe=\"name\" type=\"text\" placeholder=\"Jimmy Dean\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Card Number</label>","                      <input class=\"form-control input-lg\" id=\"number\" type=\"tel\" size=\"20\" data-stripe=\"number\" placeholder=\"4242 4242 4242 4242\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Month</label>","                      <input class=\"form-control input-lg\" id=\"exp_month\" type=\"tel\" size=\"2\" data-stripe=\"exp-month\" placeholder=\"01\" required>","                    </div>","                  </div>","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Year</label>","                      <input class=\"form-control input-lg\" id=\"exp_year\" type=\"tel\" size=\"4\" data-stripe=\"exp-year\" placeholder=\"2020\" required>","                    </div>","                  </div>","                  <div class=\"col-md-6 col-sm-3 col-xs-4\">","                    <div class=\"form-group pull-right\">","                      <label>CVC</label>","                      <input class=\"form-control input-lg\" id=\"cvc\" type=\"tel\" size=\"4\" data-stripe=\"cvc\" placeholder=\"555\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <button class=\"btn btn-lg btn-block btn-success submit\" type=\"submit\">Pay $20</button>","                  </div>","                </div>","              </form>","            </div>","          </div>","        </div>","      </div>","    </div>","","{% endblock %}","",""]}],[{"start":{"row":2,"column":9},"end":{"row":111,"column":0},"action":"remove","lines":["head_js %}","  <script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"></script>","  <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery.payment/1.4.1/jquery.payment.js\"></script>","  <script>","    Stripe.setPublishableKey('api key');","    $(function() {","      var $form = $('#payment-form');","      $form.submit(function(event){","        // Disable the submit button to prevent repeated clicks:","        $form.find('.submit').prop('disabled', true).html('Please wait...');","        // Request a token from Stripe:","        Stripe.card.createToken($form, stripeResponseHandler);","        // Prevent the form from being submitted:","        return false;","      });","      // Format the card number","      $('#number').payment('formatCardNumber');","    });","    function stripeResponseHandler(status, response){","      var $form = $('#payment-form');","      // Clear any existing errors","      $form.find('.has-error').removeClass('has-error')","      if (response.error){","        // Show the errors on the form","        $form.find('.payment-errors').text(response.error.message).addClass('alert alert-danger');","        $form.find('#' + response.error.param).parents('.form-group').addClass('has-error');","        $form.find('button').prop('disabled', false).text('Pay $20'); // Re-enable submission","      } ","      else { // Token was created!","        // Get the token ID:","        var token = response.id;","        // Insert the token into the form so it gets submitted to the server:","        $form.append($('<input type=\"hidden\" name=\"stripeToken\" />').val(token));","        // Submit the form:","        $form.get(0).submit();","      }","    }","  </script>","{% endblock %}","","{% block donations %}","<div class=\"text-center\">","    <h2>Donate!</h2>","    {#<script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\" data-key=\"{{ key }}\" data-description=\"A Django Charge\" data-amount=\"500\" data-locale=\"auto\"></script>#}","    ","  ","    <div class=\"container\">","      <div class=\"row\">","        <div class=\"col-md-12 text-center\">","          <h1>A simple Bootstrap Stripe.js payment form</h1>","        </div>","      </div>","      ","      <div class=\"row\">","        <div class=\"col-md-6 offset-md-3\">","          <div class=\"card\">","            <div class=\"card-body\">","              <form action=\"\" method=\"POST\" id=\"payment-form\">","                <div class=\"payment-errors\"></div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Cardholder Name</label>","                      <input class=\"form-control input-lg\" id=\"name\" data-stripe=\"name\" type=\"text\" placeholder=\"Jimmy Dean\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <div class=\"form-group\">","                      <label>Card Number</label>","                      <input class=\"form-control input-lg\" id=\"number\" type=\"tel\" size=\"20\" data-stripe=\"number\" placeholder=\"4242 4242 4242 4242\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Month</label>","                      <input class=\"form-control input-lg\" id=\"exp_month\" type=\"tel\" size=\"2\" data-stripe=\"exp-month\" placeholder=\"01\" required>","                    </div>","                  </div>","                  <div class=\"col-md-3 col-sm-3 col-xs-4\">","                    <div class=\"form-group\">","                      <label>Exp Year</label>","                      <input class=\"form-control input-lg\" id=\"exp_year\" type=\"tel\" size=\"4\" data-stripe=\"exp-year\" placeholder=\"2020\" required>","                    </div>","                  </div>","                  <div class=\"col-md-6 col-sm-3 col-xs-4\">","                    <div class=\"form-group pull-right\">","                      <label>CVC</label>","                      <input class=\"form-control input-lg\" id=\"cvc\" type=\"tel\" size=\"4\" data-stripe=\"cvc\" placeholder=\"555\" required>","                    </div>","                  </div>","                </div>","                <div class=\"row\">","                  <div class=\"col-md-12\">","                    <button class=\"btn btn-lg btn-block btn-success submit\" type=\"submit\">Pay $20</button>","                  </div>","                </div>","              </form>","            </div>","          </div>","        </div>","      </div>","    </div>","","{% endblock %}","",""],"id":6,"ignore":true},{"start":{"row":2,"column":9},"end":{"row":346,"column":14},"action":"insert","lines":["donations %}","  <div class=\"text-center\">","    <h2>Donate!</h2>","    ","    <style type=\"text/css\">","      .sr-root {","        display: flex;","        flex-direction: row;","        width: 100%;","        max-width: 980px;","        padding: 48px;","        align-content: center;","        justify-content: center;","        height: auto;","        min-height: 100vh;","        margin: 0 auto;","      }","      .sr-main {","        display: flex;","        flex-direction: column;","        justify-content: center;","        height: 100%;","        width: 100%;","        max-width: 450px;","        align-self: center;","        padding: 40px 50px;","        background: var(--body-color);","        border-radius: var(--radius);","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","        0px 2px 5px 0px rgba(50, 50, 93, 0.1),","        0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","      }","      ","      .sr-field-error {","        color: var(--font-color);","        text-align: left;","        font-size: 13px;","        line-height: 17px;","        margin-top: 12px;","      }","      ","      /* Inputs */","      .sr-input,","      input[type=\"text\"] {","        border: 1px solid var(--gray-border);","        border-radius: var(--radius);","        padding: 5px 12px;","        height: 44px;","        width: 100%;","        transition: box-shadow 0.2s ease;","        background: white;","        -moz-appearance: none;","        -webkit-appearance: none;","        appearance: none;","      }","      .sr-input:focus,","      input[type=\"text\"]:focus,","      button:focus,","      .focused {","        box-shadow: 0 0 0 1px rgba(50, 151, 211, 0.3), 0 1px 1px 0 rgba(0, 0, 0, 0.07),","          0 0 0 4px rgba(50, 151, 211, 0.3);","        outline: none;","        z-index: 9;","      }","      .sr-input::placeholder,","      input[type=\"text\"]::placeholder {","        color: var(--gray-light);","      }","      .sr-result {","        height: 44px;","        -webkit-transition: height 1s ease;","        -moz-transition: height 1s ease;","        -o-transition: height 1s ease;","        transition: height 1s ease;","        color: var(--font-color);","        overflow: auto;","      }","      .sr-result code {","        overflow: scroll;","      }","      .sr-result.expand {","        height: 350px;","      }","      ","      .sr-combo-inputs-row {","        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","          0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","        border-radius: 7px;","      }","      ","      /* Buttons and links */","      button {","        background: var(--accent-color);","        border-radius: var(--radius);","        color: white;","        border: 0;","        padding: 12px 16px;","        margin-top: 16px;","        font-weight: 600;","        cursor: pointer;","        transition: all 0.2s ease;","        display: block;","        box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);","        width: 100%;","      }","      button:hover {","        filter: contrast(115%);","      }","      button:active {","        transform: translateY(0px) scale(0.98);","        filter: brightness(0.9);","      }","      button:disabled {","        opacity: 0.5;","        cursor: none;","      }","      ","      a {","        color: var(--link-color);","        text-decoration: none;","        transition: all 0.2s ease;","      }","      ","      a:hover {","        filter: brightness(0.8);","      }","      ","      a:active {","        filter: brightness(0.5);","      }","      ","      /* Code block */","      code,","      pre {","        font-family: \"SF Mono\", \"IBM Plex Mono\", \"Menlo\", monospace;","        font-size: 12px;","      }","      ","      /* Stripe Element placeholder */","      .sr-card-element {","        padding-top: 12px;","      }","      ","      /* Responsiveness */","      @media (max-width: 720px) {","        .sr-root {","          flex-direction: column;","          justify-content: flex-start;","          padding: 48px 20px;","          min-width: 320px;","        }","      ","        .sr-header__logo {","          background-position: center;","        }","      ","        .sr-payment-summary {","          text-align: center;","        }","      ","        .sr-content {","          display: none;","        }","      ","        .sr-main {","          width: 100%;","          height: 305px;","          background: rgb(247, 250, 252);","          box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),","            0px 2px 5px 0px rgba(50, 50, 93, 0.1),","            0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);","          border-radius: 6px;","        }","      }","      ","      /* todo: spinner/processing state, errors, animations */","      ","      #spinner {","        display: block;","      }","      ","      /* Animated form */","      ","      .sr-root {","        animation: 0.4s form-in;","        animation-fill-mode: both;","        animation-timing-function: ease;","      }","      ","      .hidden {","        display: none !important;","      }","      ","      @keyframes field-in {","        0% {","          opacity: 0;","          transform: translateY(8px) scale(0.95);","        }","        100% {","          opacity: 1;","          transform: translateY(0px) scale(1);","        }","      }","      ","      @keyframes form-in {","        0% {","          opacity: 0;","          transform: scale(0.98);","        }","        100% {","          opacity: 1;","          transform: scale(1);","        }","      }","","    </style>","    ","    <script src=\"https://js.stripe.com/v3\"></script>","    ","    <div class=\"sr-root\">","      <div class=\"sr-main\">","        <p>Enter your card details</p>","        <form id=\"payment-form\" class=\"sr-payment-form\">","          <div class=\"sr-combo-inputs-row\">","            <div class=\"sr-input sr-card-element\" id=\"card-element\"></div>","          </div>","          <div class=\"sr-field-error\" id=\"card-errors\" role=\"alert\"></div>","          <button id=\"submit\" class=\"btn btn-primary\">","            <span class=\"spinner hidden\" id=\"spinner\">","              Loading...","            </span>","            <span id=\"button-text\">Pay</span><span id=\"order-amount\"></span>","          </button>","        </form>","        <div class=\"sr-result hidden\">","          <p>Payment completed<br /></p>","          <pre>","            <code></code>","          </pre>","        </div>","      </div>","    </div>","  </div>","","  <script type=\"text/javascript\">","    let pay = function(stripe, card, clientSecret) {","      changeLoadingState(true);","    ","      // Initiate the payment.","      // If authentication is required, confirmCardPayment will automatically display a modal","      stripe","        .confirmCardPayment(clientSecret, {","          payment_method: {","            card: card","          }","        })","        .then(function(result) {","          if (result.error) {","            // Show error to your customer","            showError(result.error.message);","          } else {","            // The payment has been processed!","            orderComplete(clientSecret);","          }","        });","    };","  ","    let setupElements = function() {","      let stripe = Stripe(\"{{ stripe_pub_key }}\");","      let elements = stripe.elements();","      let style = {","        base: {","          color: \"#32325d\",","          fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',","          fontSmoothing: \"antialiased\",","          fontSize: \"16px\",","          \"::placeholder\": {","            color: \"#aab7c4\"","          }","        },","        invalid: {","          color: \"#fa755a\",","          iconColor: \"#fa755a\"","        }","      };","    ","      let card = elements.create(\"card\", { style: style });","      card.mount(\"#card-element\");","    ","      return {","        stripe: stripe,","        card: card,","        clientSecret: \"{{ client_secret }}\"","      };","    };","    ","    let { stripe, card, clientSecret } = setupElements();","    ","    document.querySelector(\"button\").disabled = false;","","    // Handle form submission.","    let form = document.getElementById(\"payment-form\");","    form.addEventListener(\"submit\", function(event) {","      event.preventDefault();","      // Initiate payment when the submit button is clicked","      pay(stripe, card, clientSecret);","    });","    ","    var orderComplete = function(clientSecret) {","    // Just for the purpose of the sample, show the PaymentIntent response object","    stripe.retrievePaymentIntent(clientSecret).then(function(result) {","      let form_data = new FormData();","      form_data.append('data', JSON.stringify(result.paymentIntent));","      ","      fetch('/thankyou/', {","        method: 'POST',","        body: form_data,","      }).then(resp => resp).then(data => window.location = '/thankyou/')","      ","    });","  };","  ","  var showError = function(errorMsgText) {","    changeLoadingState(false);","    var errorMsg = document.querySelector(\".sr-field-error\");","    errorMsg.textContent = errorMsgText;","    setTimeout(function() {","      errorMsg.textContent = \"\";","    }, 4000);","  };","  ","  // Show a spinner on payment submission","  var changeLoadingState = function(isLoading) {","    if (isLoading) {","      document.querySelector(\"button\").disabled = true;","      document.querySelector(\"#spinner\").classList.remove(\"hidden\");","      document.querySelector(\"#button-text\").classList.add(\"hidden\");","    } else {","      document.querySelector(\"button\").disabled = false;","      document.querySelector(\"#spinner\").classList.add(\"hidden\");","      document.querySelector(\"#button-text\").classList.remove(\"hidden\");","    }","  };","  </script>","{% endblock %}"]}]]},"ace":{"folds":[],"scrolltop":429.5,"scrollleft":0,"selection":{"start":{"row":2,"column":9},"end":{"row":2,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":{"row":45,"state":"css-ruleset","mode":"ace/mode/html"}},"timestamp":1587830289933,"hash":"47217c451cb90ef49f5845c9065054ae1aee3a7d"}